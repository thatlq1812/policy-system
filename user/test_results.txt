======================================
User Service API Testing
======================================

======================================
1. REGISTER API TESTS
======================================

Testing: 1.1 Valid Registration
Method: Register
Data: {"phone_number":"0901234567","password":"password123","name":"Test User","platform_role":"Client"}
[0;31mâœ— FAILED - Unexpected error[0m
ERROR:
  Code: AlreadyExists
  Message: user already exists: user with phone number 0901234567 already exists

--------------------------------------

Testing: 1.2 Missing Phone Number
Method: Register
Data: {"password":"password123","name":"Test User","platform_role":"Client"}
[0;32mâœ“ ERROR AS EXPECTED: InvalidArgument[0m

--------------------------------------

Testing: 1.3 Short Password
Method: Register
Data: {"phone_number":"0901234568","password":"12345","name":"Test User","platform_role":"Client"}
[0;32mâœ“ ERROR AS EXPECTED: InvalidArgument[0m

--------------------------------------

Testing: 1.4 Invalid Platform Role
Method: Register
Data: {"phone_number":"0901234569","password":"password123","name":"Test User","platform_role":"InvalidRole"}
[0;32mâœ“ ERROR AS EXPECTED: InvalidArgument[0m

--------------------------------------

Testing: 1.5 Duplicate Phone Number
Method: Register
Data: {"phone_number":"0901234567","password":"password123","name":"Test User 2","platform_role":"Client"}
[0;32mâœ“ ERROR AS EXPECTED: AlreadyExists[0m

--------------------------------------


======================================
2. LOGIN API TESTS
======================================

Testing: 2.1 Valid Login
Method: Login
Data: {"phone_number":"0901234567","password":"password123"}
[0;31mâœ— FAILED - Unexpected error[0m
ERROR:
  Code: Unauthenticated
  Message: invalid credentials

--------------------------------------

Testing: 2.2 Missing Phone Number
Method: Login
Data: {"password":"password123"}
[0;32mâœ“ ERROR AS EXPECTED: InvalidArgument[0m

--------------------------------------

Testing: 2.3 Wrong Password
Method: Login
Data: {"phone_number":"0901234567","password":"wrongpassword"}
[0;32mâœ“ ERROR AS EXPECTED: Unauthenticated[0m

--------------------------------------

Testing: 2.4 Non-existent User
Method: Login
Data: {"phone_number":"0909999999","password":"password123"}
[0;32mâœ“ ERROR AS EXPECTED: Unauthenticated[0m

--------------------------------------


======================================
3. REFRESH TOKEN API TESTS
======================================

Getting valid refresh token...
[0;31mFailed to get refresh token for testing[0m

======================================
4. LOGOUT API TESTS
======================================

Getting tokens for logout test...

======================================
5. USER PROFILE TESTS
======================================


======================================
6. CHANGE PASSWORD TESTS
======================================


======================================
7. ADMIN - LIST USERS TESTS
======================================

Testing: 7.1 List Users - Valid
Method: ListUsers
Data: {"page":1,"page_size":10}
[0;32mâœ“ SUCCESS[0m
{
  "users": [
    {
      "id": "b6a78989-79a2-47b6-9d8e-8c11445e5c9a",
      "phoneNumber": "string",
      "name": "string",
      "platformRole": "Admin",
      "createdAt": "1765446180",
      "updatedAt": "1765446180"
    },
    {
      "id": "77057e09-8940-49b9-884e-1796a410b5df",
      "phoneNumber": "0979667069",
      "name": "quang",
      "platformRole": "Admin",
      "createdAt": "1765439956",
      "updatedAt": "1765439956"
    },
    {
      "id": "c5d362d2-18b5-4979-90d5-888aaf08a007",

--------------------------------------

Testing: 7.2 List Users With Filter
Method: ListUsers
Data: {"page":1,"page_size":10,"platform_role":"Client"}
[0;32mâœ“ SUCCESS[0m
{
  "users": [
    {
      "id": "87fe30f2-c2a6-401d-8c44-c9ee46145fb7",
      "phoneNumber": "090000001",
      "name": "Test User",
      "platformRole": "Client",
      "createdAt": "1765435177",
      "updatedAt": "1765435177"
    },
    {
      "id": "a9404105-94a1-4ecb-a4be-7ecdec19dd78",
      "phoneNumber": "0909000111",
      "name": "Temp User",
      "platformRole": "Client",
      "createdAt": "1765431368",
      "updatedAt": "1765431368"
    },
    {
      "id": "09caaf5d-b6a3-423c-b760-e2217b138616",

--------------------------------------

Testing: 7.3 Invalid Page Number
Method: ListUsers
Data: {"page":0,"page_size":10}
[0;32mâœ“ SUCCESS[0m
{
  "users": [
    {
      "id": "b6a78989-79a2-47b6-9d8e-8c11445e5c9a",
      "phoneNumber": "string",
      "name": "string",
      "platformRole": "Admin",
      "createdAt": "1765446180",
      "updatedAt": "1765446180"
    },
    {
      "id": "77057e09-8940-49b9-884e-1796a410b5df",
      "phoneNumber": "0979667069",
      "name": "quang",
      "platformRole": "Admin",
      "createdAt": "1765439956",
      "updatedAt": "1765439956"
    },
    {
      "id": "c5d362d2-18b5-4979-90d5-888aaf08a007",

--------------------------------------


======================================
8. ADMIN - SEARCH USERS TESTS
======================================

Testing: 8.1 Search Users By Name
Method: SearchUsers
Data: {"query":"Test","limit":10}
[0;32mâœ“ SUCCESS[0m
{
  "users": [
    {
      "id": "87fe30f2-c2a6-401d-8c44-c9ee46145fb7",
      "phoneNumber": "090000001",
      "name": "Test User",
      "platformRole": "Client",
      "createdAt": "1765435177",
      "updatedAt": "1765435177"
    },
    {
      "id": "09caaf5d-b6a3-423c-b760-e2217b138616",
      "phoneNumber": "0909999991",
      "name": "Quick Test",
      "platformRole": "Client",
      "createdAt": "1765431361",
      "updatedAt": "1765431361"
    },
    {
      "id": "abd65cb5-0d5b-41fe-af74-e160c35ce8b2",

--------------------------------------

Testing: 8.2 Empty Query
Method: SearchUsers
Data: {"query":"","limit":10}
[0;32mâœ“ ERROR AS EXPECTED: InvalidArgument[0m

--------------------------------------


======================================
9. GET USER STATS TESTS
======================================

Testing: 9.1 Get User Stats
Method: GetUserStats
Data: {}
[0;32mâœ“ SUCCESS[0m
{
  "totalUsers": 18,
  "totalDeletedUsers": 4,
  "totalActiveSessions": 31,
  "usersByRoleClient": 8,
  "usersByRoleMerchant": 3,
  "usersByRoleAdmin": 7
}

--------------------------------------


======================================
10. TOKEN BLACKLIST TESTS
======================================

Testing: 10.1 Check Non-existent JTI
Method: IsTokenBlacklisted
Data: {"jti":"test-jti-12345"}
[0;32mâœ“ SUCCESS[0m
{}

--------------------------------------

Testing: 10.2 Empty JTI
Method: IsTokenBlacklisted
Data: {"jti":""}
[0;32mâœ“ ERROR AS EXPECTED: InvalidArgument[0m

--------------------------------------


======================================
TESTING COMPLETE
======================================
